<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Animal Cash</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet"/>

  <!-- CSS utama proyek -->
  <link rel="stylesheet" href="css/style.css"/>

  <!-- Sedikit CSS guard: sidebar & default visible page -->
  <style>
    /* Sidebar bisa digeser keluar/masuk */
    #sidebar { transform: translateX(100%); transition: transform .2s ease; }
    #sidebar.open { transform: translateX(0); }
    /* Kalau JS utama gagal, set default: Home tetap nampak */
    .page { display: none; }
    #home { display: block; }
    /* Sedikit styling untuk kartu model */
    .animal-card model-viewer{ width:100%; height:300px; background:#111; border-radius:12px; display:block; }
  </style>

  <!-- 3D Model Viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>üêæ Animal Cash</h1>
    <div class="hamburger" onclick="toggleMenu()">‚ò∞</div>
  </header>

  <!-- Sidebar -->
  <nav id="sidebar">
    <a href="#home"    onclick="showPage('home')">HOME</a>
    <a href="#profile" onclick="showPage('profile')">PROFILE</a>
    <a href="#farm"    onclick="showPage('farm')">FARM</a>
    <a href="#contact" onclick="showPage('contact')">CONTACT</a>
    <a href="#logout"  onclick="logout()">LOGOUT</a>
  </nav>

  <!-- Main -->
  <main>
    <!-- Register -->
    <div id="register" class="page">
      <h2>Daftar Akun</h2>
      <form onsubmit="registerUser(event)">
        <input type="text" id="reg-phone" placeholder="Nomor HP" required>
        <input type="password" id="reg-password" placeholder="Kata Sandi" required>
        <input type="password" id="reg-pin" placeholder="Kode Keamanan Penarikan" required>
        <button type="submit">Daftar</button>
      </form>
      <p>Sudah punya akun? <a href="#login" onclick="showPage('login')">Login</a></p>
    </div>

    <!-- Login -->
    <div id="login" class="page">
      <h2>Login</h2>
      <form onsubmit="loginUser(event)">
        <input type="text" id="login-phone" placeholder="Nomor HP" required>
        <input type="password" id="login-password" placeholder="Kata Sandi" required>
        <button type="submit">Login</button>
      </form>
      <p>Belum punya akun? <a href="#register" onclick="showPage('register')">Daftar</a></p>
    </div>

    <!-- Home -->
    <div id="home" class="page">
      <h2>Selamat Datang di Animal Cash</h2>
      <div class="slider">
        <div class="slides">
          <div class="slide active">
            <img src="https://i.ibb.co/7nbGdpH/cow.png" alt="Sapi">
            <p>Beli sapi üêÆ dapat bonus 10% penghasilan!</p>
          </div>
          <div class="slide">
            <img src="https://i.ibb.co/1ZpBpY2/chicken.png" alt="Ayam">
            <p>Beli ayam üêî gratis 1 telur emas!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile -->
    <div id="profile" class="page">
      <h2>Profil</h2>
      <div class="card">
        <p><b>Username:</b> <span id="profile-username"></span></p>
        <p><b>Email:</b> <span id="profile-email"></span></p>
        <p><b>Saldo:</b> Rp <span id="profile-balance">0</span></p>
        <button onclick="withdraw()">Tarik Saldo</button>
      </div>
    </div>

    <!-- Farm -->
    <div id="farm" class="page">
      <h2>Peternakan</h2>

      <!-- Sapi 3D (kalau belum upload cow.glb, bagian ini tetap aman, hanya tidak menampilkan model) -->
      <div class="animal-card">
        <model-viewer
          src="assets/models/cow.glb"
          ios-src="assets/models/Cow.usdz"
          alt="Sapi 3D"
          camera-controls
          auto-rotate
          ar
          ar-modes="webxr scene-viewer quick-look">
        </model-viewer>
        <h3>üêÆ Sapi</h3>
        <p>Harga: Rp 50.000</p>
        <p>Penghasilan/hari: Rp 2.000</p>
        <button onclick="buyAnimal('cow')">Beli</button>
      </div>

      <!-- Ayam 3D (gunakan huruf besar C sesuai file: Chicken.usdz) -->
      <div class="animal-card">
        <model-viewer
          src="assets/models/chicken.glb"
          ios-src="assets/models/Chicken.usdz"
          alt="Ayam 3D"
          camera-controls
          auto-rotate
          ar
          ar-modes="webxr scene-viewer quick-look">
        </model-viewer>
        <h3>üêî Ayam</h3>
        <p>Harga: Rp 20.000</p>
        <p>Penghasilan/hari: Rp 800</p>
        <button onclick="buyAnimal('chicken')">Beli</button>
      </div>
    </div>

    <!-- Contact -->
    <div id="contact" class="page">
      <h2>Kontak</h2>
      <p>Hubungi admin di <a href="mailto:support@animalcash.com">support@animalcash.com</a></p>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Animal Cash</p>
  </footer>

  <!-- Scripts proyek (tetap seperti semula) -->
  <script src="js/auth.js"></script>
  <script src="js/farm.js"></script>
  <!-- Jika belum mengkonfigurasi Firebase dan ini bikin error, sementara bisa non-aktifkan baris di bawah -->
  <!-- <script src="js/firebase.js"></script> -->
  <script src="js/main.js"></script>
  <script src="js/ui.js"></script>

  <!-- HOTFIX: fallback router + toggle jika script lain error -->
  <script>
    (function () {
      // toggle sidebar
      window.toggleMenu = window.toggleMenu || function () {
        var sb = document.getElementById('sidebar');
        if (sb) sb.classList.toggle('open');
      };

      // tampilkan 1 halaman
      function safeShow(id){
        document.querySelectorAll('.page').forEach(el => el.style.display = 'none');
        var p = document.getElementById(id);
        if (p) p.style.display = 'block';
      }

      // fungsi showPage fallback
      window.showPage = window.showPage || function (id) {
        safeShow(id);
        try { location.hash = '#' + id; } catch(e){}
      };

      // boot awal (ambil dari hash kalau ada, default 'home')
      var first = (location.hash || '#home').replace('#','');
      safeShow(first);

      // dukung tombol back/forward
      window.addEventListener('hashchange', function(){
        var id = (location.hash || '#home').replace('#','');
        safeShow(id);
      });
    })();
  </script>
</body>
</html>
